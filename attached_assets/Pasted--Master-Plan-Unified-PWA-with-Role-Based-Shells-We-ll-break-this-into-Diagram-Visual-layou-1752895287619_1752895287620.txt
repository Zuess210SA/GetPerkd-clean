ğŸ§  Master Plan: Unified PWA with Role-Based Shells
We'll break this into:

ğŸ“Š Diagram â€“ Visual layout of the system
ğŸ§± Folder Structure â€“ How to organize your code
ğŸš¦ Routing Logic â€“ Who sees what
ğŸ’¤ Performance â€“ Lazy loading & optimization tips
ğŸ—ºï¸ Visual System Architecture
scss
Copy
Edit
                      ğŸŒ getperkd.com
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚             â”‚
      ğŸ§‘â€ğŸ“ Student         ğŸ§‘â€ğŸ’¼ Merchant        ğŸ¤ Franchisee
     Dashboard              Dashboard         Command Center
        (PWA Shell 1)       (PWA Shell 2)     (PWA Shell 3)
           â”‚                   â”‚                  â”‚
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ QR Deals Page â”‚     â”‚ Deal Builder  â”‚   â”‚ Territory   â”‚
 â”‚ Reward Shop   â”‚     â”‚ Redemption UX â”‚   â”‚ Analytics    â”‚
 â”‚ Challenges    â”‚     â”‚ Staff Mgmt    â”‚   â”‚ Recruitment  â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“ Recommended Folder Structure
bash
Copy
Edit
/src
  /components
    /common              # Buttons, modals, toasts
    /student             # QR challenges, deal cards
    /merchant            # Deal editor, feedback panel
    /franchisee          # Reports, onboarding tools

  /layouts
    StudentLayout.tsx
    MerchantLayout.tsx
    FranchiseeLayout.tsx

  /pages
    /student
      index.tsx          # Dashboard
      deals.tsx
      rewards.tsx

    /merchant
      index.tsx
      create-deal.tsx
      feedback.tsx

    /franchisee
      index.tsx
      analytics.tsx
      training.tsx

  /routes
    PrivateRoute.tsx     # Auth + role protection

  /context
    AuthContext.tsx
    UserContext.tsx
ğŸ§­ Role-Based Routing Logic
Use a middleware wrapper (PrivateRoute.tsx) that checks:

âœ… Authenticated?

ğŸ§‘â€ğŸ“ Student vs ğŸ§‘â€ğŸ’¼ Merchant vs ğŸ¤ Franchisee?

âŒ If not the right role â†’ redirect to login or correct dashboard

tsx
Copy
Edit
// PrivateRoute.tsx (simplified)
if (!user.isLoggedIn) return <Navigate to="/login" />;
if (user.role !== requiredRole) return <Navigate to={`/${user.role}`} />;
ğŸ’¤ Performance Tips:
âœ… Optimization	ğŸ” Benefit
Code splitting by layout	Only load what that role needs
Lazy loading tabs	Donâ€™t load Reward Shop until clicked
Memoize heavy components	Reduce unnecessary re-renders
Image optimization	Use WebP and CDN caching
Prefetch likely pages	Predict user flow and preload it

ğŸš€ Launch-Ready Domains/Subdomains
URL	Role
getperkd.com	Landing page
app.getperkd.com	Student app
merchant.getperkd.com	Merchant app
franchise.getperkd.com	Franchisee HQ

All subdomains â†’ same PWA, just pass role context via route or session cookie.

âœ… Next Steps (Want Me to Do These?)
 Generate role shell layout templates (ready to paste into Replit)

 Build PrivateRoute.tsx for auth/role-based routing

 Create a visual "Module Overview PDF" for investors/franchisees

 Refactor routes into student, merchant, franchisee folders

 Wire up the navbar to show only role-specific links

